@model List<STEP_DEMO.Models.EmployeeInfo>

<head>
    <link rel="stylesheet" type="text/css" href="~/Content/css/CustomStyles.css">
</head>

@using (Html.BeginForm("AddMarks", "ReportSuper", FormMethod.Post, new { id = "employeeForm" }))
{
    @Html.Hidden("regID", null, new { id = "regIDField" })
}

@using (Html.BeginForm("ViewMarks", "ReportSuper", FormMethod.Post, new { id = "viewMarksForm" }))
{
    @Html.Hidden("regID", null, new { id = "viewregIDField" })
}

<h3 style="text-align:center;">Employee List</h3>
<br />
<br />
@using (Html.BeginForm("ViewEmpList", "DeptHead", FormMethod.Post))
{
    <div class="form-group">
        @Html.DropDownList("companyId", ViewBag.Companies as SelectList, "Select an unit", new { @class = "form-control" })
        @Html.ValidationMessage("companyId", "", new { @class = "text-danger" })
    </div>
    <button type="submit" class="btn btn-primary">Search</button>
}
<br />
<br />
<div class="user-info-container">
    @if (Model != null && Model.Any())
    {
        <table class="user-info-table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Employee Code</th>
                    <th>Department</th>
                    <th>Section</th>
                    <th>Designation</th>
                    <th>View Marks</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var employee in Model)
                {
                <tr>
                    <td><a href="javascript:void(0);" onclick="setEmployeeCodeAndSubmit('@employee.RegId')">@employee.Name</a></td>
                    <td>@employee.EmployeeCode</td>
                    <td>@employee.Department</td>
                    <td>@employee.Section</td>
                    <td>@employee.Designation</td>
                    <td><a href="javascript:void(0);" onclick="setRegId('@employee.RegId')">View Marks</a></td>
                </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <p>No employees found</p>
    }
</div>

<script>
    function setEmployeeCodeAndSubmit(code) {
        document.getElementById("regIDField").value = code;
        document.getElementById("employeeForm").submit();
    }

    function setRegId(regID) {
        document.getElementById("viewregIDField").value = regID;
        document.getElementById("viewMarksForm").submit();
    }
</script>